import{_ as r}from"./slidev/VClick-DDCzowBw.js";import{_ as d}from"./slidev/CodeBlockWrapper.vue_vue_type_script_setup_true_lang-B6eeuXSI.js";import{b as o,o as D,w as l,g as i,e as t,m as E,ae as s,v as g,x as c,U as n}from"./modules/vue-DuQ6znsG.js";import{I as m}from"./slidev/default-Db0WDulJ.js";import{u as A,f as y}from"./slidev/context-ClfosQhi.js";import"./index-BmXVkfoT.js";import"./modules/shiki-B3zQBwBy.js";import"./slidev/VClicks-Ch7LDgoX.js";import"./modules/unplugin-icons-Bm8mGog5.js";import"./slidev/TitleIcon.vue_vue_type_script_setup_true_lang-zi13T2eE.js";const v={__name:"slides.md__slidev_28",setup(u){const{$clicksContext:k,$frontmatter:h}=A();return k.setup(),(C,a)=>{const p=d,e=r;return D(),o(m,g(c(n(y)(n(h),27))),{default:l(()=>[a[5]||(a[5]=i("h1",null,"Докерфайл",-1)),t(p,E({maxHeight:"180px"},{title:"",ranges:["none","7,9","10","12,15-18","20"]}),{default:l(()=>a[0]||(a[0]=[i("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light slidev-code",style:{"--shiki-dark":"#dbd7caee","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-dockerfile"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"FROM"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," bellsoft/liberica-runtime-container:jdk-24-musl "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"as"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," builder")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"RUN"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," apk add --no-cache nodejs npm")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"WORKDIR"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," /app")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"ADD"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," . /app/neurowatch")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"RUN"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," cd neurowatch && ./mvnw -Pproduction clean package")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"FROM"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," bellsoft/liberica-runtime-container:jre-24-musl "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"as"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," optimizer")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"WORKDIR"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," /app")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=builder /app/neurowatch/target/neurowatch-*.jar app.jar")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"RUN"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," java -Djarmode=tools -jar /app/app.jar extract --layers --destination extracted")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"FROM"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," bellsoft/liberica-runtime-container:jre-24-slim-musl")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"WORKDIR"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," /app")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/extracted/dependencies/ ./")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/extracted/spring-boot-loader/ ./")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/extracted/snapshot-dependencies/ ./")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/extracted/application/ ./")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"EXPOSE"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," 8080")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"ENTRYPOINT"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," ["),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},'"java"'),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},","),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},'"-jar"'),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},","),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},'"/app/app.jar"'),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"]")])])],-1)])),_:1,__:[0]},16),t(e,{at:"1"},{default:l(()=>a[1]||(a[1]=[i("ul",null,[i("li",null,"Промежуточный этап: optimizer")],-1)])),_:1,__:[1]}),t(e,{at:"2"},{default:l(()=>a[2]||(a[2]=[i("ul",null,[i("li",null,'Извлекаем "слоёный" JAR')],-1)])),_:1,__:[2]}),t(e,{at:"3"},{default:l(()=>a[3]||(a[3]=[i("ul",null,[i("li",null,"Копируем слои в итоговый базовый образ")],-1)])),_:1,__:[3]}),t(e,{at:"4"},{default:l(()=>a[4]||(a[4]=[i("ul",null,[i("li",null,"Запускаем как обычно")],-1)])),_:1,__:[4]})]),_:1,__:[5]},16)}}};export{v as default};
